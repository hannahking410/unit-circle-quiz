<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Unit Circle Quiz</title>
  
  <!-- PWA Setup -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#ff9cc5">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Unit Circle">
  <link rel="apple-touch-icon" href="/icon-192.png">
  
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/framer-motion@10/dist/framer-motion.js"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;
    const { motion, AnimatePresence } = Motion;

    // All standard unit circle angles with their sine and cosine values
    const UNIT_CIRCLE_VALUES = [
      { degrees: 0, radians: '0', sine: '0', cosine: '1' },
      { degrees: 30, radians: 'Ï€/6', sine: '1/2', cosine: 'âˆš3/2' },
      { degrees: 45, radians: 'Ï€/4', sine: 'âˆš2/2', cosine: 'âˆš2/2' },
      { degrees: 60, radians: 'Ï€/3', sine: 'âˆš3/2', cosine: '1/2' },
      { degrees: 90, radians: 'Ï€/2', sine: '1', cosine: '0' },
      { degrees: 120, radians: '2Ï€/3', sine: 'âˆš3/2', cosine: '-1/2' },
      { degrees: 135, radians: '3Ï€/4', sine: 'âˆš2/2', cosine: '-âˆš2/2' },
      { degrees: 150, radians: '5Ï€/6', sine: '1/2', cosine: '-âˆš3/2' },
      { degrees: 180, radians: 'Ï€', sine: '0', cosine: '-1' },
      { degrees: 210, radians: '7Ï€/6', sine: '-1/2', cosine: '-âˆš3/2' },
      { degrees: 225, radians: '5Ï€/4', sine: '-âˆš2/2', cosine: '-âˆš2/2' },
      { degrees: 240, radians: '4Ï€/3', sine: '-âˆš3/2', cosine: '-1/2' },
      { degrees: 270, radians: '3Ï€/2', sine: '-1', cosine: '0' },
      { degrees: 300, radians: '5Ï€/3', sine: '-âˆš3/2', cosine: '1/2' },
      { degrees: 315, radians: '7Ï€/4', sine: '-âˆš2/2', cosine: 'âˆš2/2' },
      { degrees: 330, radians: '11Ï€/6', sine: '-1/2', cosine: 'âˆš3/2' },
    ];

    const MODES = [
      { id: 'angle', name: 'Angle Quiz'},
      { id: 'sine', name: 'Sine Quiz'},
      { id: 'cosine', name: 'Cosine Quiz'},
    ];

    const UnitCircleQuiz = () => {
      const [gameState, setGameState] = useState('menu');
      const [selectedMode, setSelectedMode] = useState(null);
      const [questions, setQuestions] = useState([]);
      const [incorrectQuestions, setIncorrectQuestions] = useState([]);
      const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
      const [userAnswer, setUserAnswer] = useState('');
      const [showFeedback, setShowFeedback] = useState(false);
      const [isCorrect, setIsCorrect] = useState(false);
      const [score, setScore] = useState({ correct: 0, total: 0 });
      const [isReviewRound, setIsReviewRound] = useState(false);

      const shuffleArray = (array) => {
        const shuffled = [...array];
        for (let i = shuffled.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
      };

      const startGame = (mode) => {
        setSelectedMode(mode);
        setQuestions(shuffleArray(UNIT_CIRCLE_VALUES));
        setIncorrectQuestions([]);
        setCurrentQuestionIndex(0);
        setUserAnswer('');
        setShowFeedback(false);
        setScore({ correct: 0, total: 0 });
        setIsReviewRound(false);
        setGameState('playing');
      };

      const normalizeAnswer = (answer) => {
        return answer
          .toLowerCase()
          .replace(/\s+/g, '')
          .replace(/\*/g, '')
          .replace(/sqrt/g, 'âˆš')
          .replace(/pi/g, 'Ï€');
      };

      const checkAnswer = () => {
        const currentQuestion = questions[currentQuestionIndex];
        const normalized = normalizeAnswer(userAnswer);
        let correctAnswer;

        if (selectedMode.id === 'angle') {
          correctAnswer = normalizeAnswer(currentQuestion.radians);
          const alsoCorrect = normalizeAnswer(`${currentQuestion.degrees}Â°`);
          const alsoCorrect2 = normalizeAnswer(`${currentQuestion.degrees}`);
          setIsCorrect(normalized === correctAnswer || normalized === alsoCorrect || normalized === alsoCorrect2);
        } else if (selectedMode.id === 'sine') {
          correctAnswer = normalizeAnswer(currentQuestion.sine);
          setIsCorrect(normalized === correctAnswer);
        } else {
          correctAnswer = normalizeAnswer(currentQuestion.cosine);
          setIsCorrect(normalized === correctAnswer);
        }

        setShowFeedback(true);
        setScore(prev => ({ ...prev, total: prev.total + 1 }));

        if (normalized === correctAnswer || 
            (selectedMode.id === 'angle' && (normalized === normalizeAnswer(`${currentQuestion.degrees}Â°`) || 
             normalized === normalizeAnswer(`${currentQuestion.degrees}`)))) {
          setScore(prev => ({ ...prev, correct: prev.correct + 1 }));
        } else {
          if (!incorrectQuestions.find(q => q.degrees === currentQuestion.degrees)) {
            setIncorrectQuestions(prev => [...prev, currentQuestion]);
          }
        }
      };

      const nextQuestion = () => {
        if (currentQuestionIndex < questions.length - 1) {
          setCurrentQuestionIndex(prev => prev + 1);
          setUserAnswer('');
          setShowFeedback(false);
        } else {
          if (incorrectQuestions.length > 0 && !isReviewRound) {
            setQuestions(shuffleArray(incorrectQuestions));
            setIncorrectQuestions([]);
            setCurrentQuestionIndex(0);
            setUserAnswer('');
            setShowFeedback(false);
            setIsReviewRound(true);
          } else if (incorrectQuestions.length > 0 && isReviewRound) {
            setQuestions(shuffleArray(incorrectQuestions));
            setIncorrectQuestions([]);
            setCurrentQuestionIndex(0);
            setUserAnswer('');
            setShowFeedback(false);
          } else {
            setGameState('complete');
          }
        }
      };

      const drawUnitCircle = (angle) => {
        const radians = (angle * Math.PI) / 180;
        const x = Math.cos(radians);
        const y = -Math.sin(radians);
        
        return (
          <svg viewBox="-1.5 -1.5 3 3" className="unit-circle-svg">
            <line x1="-1.3" y1="0" x2="1.3" y2="0" stroke="rgba(255, 192, 211, 0.3)" strokeWidth="0.01" />
            <line x1="0" y1="-1.3" x2="0" y2="1.3" stroke="rgba(255, 192, 211, 0.3)" strokeWidth="0.01" />
            <circle cx="0" cy="0" r="1" fill="none" stroke="#0D3B66" strokeWidth="0.03" />
            <line x1="0" y1="0" x2={x} y2={y} stroke="#0D3B66" strokeWidth="0.04" />
            <circle cx={x} cy={y} r="0.08" fill="#ff9cc5" />
            <text x="1.2" y="0.1" fill="#ff9cc5" fontSize="0.15" textAnchor="middle">1</text>
            <text x="0.1" y="-1.2" fill="#ff9cc5" fontSize="0.15" textAnchor="middle">1</text>
            <text x="-1.2" y="0.1" fill="#ff9cc5" fontSize="0.15" textAnchor="middle">-1</text>
            <text x="0.1" y="1.3" fill="#ff9cc5" fontSize="0.15" textAnchor="middle">-1</text>
          </svg>
        );
      };

      const currentQuestion = questions[currentQuestionIndex];

      return (
        <div className="quiz-container">
          <style>{`
            @import url('https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&display=swap');
            
            * {
              box-sizing: border-box;
              margin: 0;
              padding: 0;
            }
            
            body {
              margin: 0;
              padding: 0;
              overflow-x: hidden;
              /* Prevent rubber-band scrolling on mobile */
              position: fixed;
              width: 100%;
              height: 100%;
            }
            
            #root {
              width: 100%;
              height: 100%;
              overflow-y: auto;
              -webkit-overflow-scrolling: touch;
            }
            
            .quiz-container {
              min-height: 100vh;
              background: linear-gradient(135deg, #fff5f7 0%, #ffe8ec 50%, #ffd4dc 100%); 
              color: #5a4a4f;
              font-family: 'Lora', sans-serif;
              padding: 20px;
              padding-bottom: 40px; /* Extra padding at bottom for mobile keyboards */
              position: relative;
              overflow: hidden;
            }
            
            .quiz-container::before {
              position: fixed;
              top: 20px;
              left: 0;
              right: 0;
              text-align: center;
              font-size: 1.5rem;
              color: rgba(255, 182, 193, 0.3);
              pointer-events: none;
              z-index: 1;
              letter-spacing: 20px;
            }
            
            .content {
              position: relative;
              z-index: 2;
              max-width: 900px;
              margin: 0 auto;
            }
            
            .header {
              text-align: center;
              margin-bottom: 40px;
            }
            
            @keyframes float {
              0%, 100% { transform: translateY(0px); }
              50% { transform: translateY(-10px); }
            }
            
            .title {
              font-family: 'Lora', sans-serif;
              font-size: clamp(2.5rem, 8vw, 4.5rem);
              font-weight: 700;
              color: #0D3B66;
              margin-bottom: 10px;
            }
            
            .subtitle {
              font-size: clamp(1rem, 2.5vw, 1.2rem);
              color: #f22241;
              font-weight: 600;
            }
            
            .mode-selection {
              display: grid;
              gap: 20px;
              margin-top: 40px;
            }
            
            .mode-card {
              background: white;
              border: 3px solid #ffc0d3;
              border-radius: 24px;
              padding: 30px;
              cursor: pointer;
              transition: all 0.3s ease;
              position: relative;
              overflow: hidden;
              box-shadow: 0 4px 15px rgba(255, 107, 157, 0.1);
            }
            
            .mode-card::before {
              content: '';
              position: absolute;
              top: -50%;
              right: -50%;
              width: 200%;
              height: 200%;
              background: radial-gradient(circle, rgba(255, 192, 211, 0.2) 0%, transparent 70%);
              transition: all 0.5s ease;
              opacity: 0;
            }
            
            .mode-card:hover {
              transform: translateY(-8px);
              border-color: #ff6b9d;
              box-shadow: 0 12px 30px rgba(255, 107, 157, 0.25);
            }
            
            .mode-card:hover::before {
              opacity: 1;
              top: -25%;
              right: -25%;
            }
            
            .mode-name {
              font-family: 'Lora', sans-serif;
              font-size: clamp(1.3rem, 4vw, 1.8rem);
              font-weight: 700;
              color: #0D3B66;
              margin-bottom: 10px;
              position: relative;
            }
            
            .mode-description {
              color: #b58a99;
              font-size: clamp(0.9rem, 2.5vw, 1rem);
              position: relative;
            }
            
            .game-view {
              animation: fadeIn 0.5s ease;
            }
            
            @keyframes fadeIn {
              from { opacity: 0; transform: translateY(20px); }
              to { opacity: 1; transform: translateY(0); }
            }
            
            /* FIXED: Progress bar with better mobile sizing */
            .progress-bar {
              background: white;
              border: 3px solid #ffc0d3;
              border-radius: 30px;
              height: 50px;
              margin-bottom: 30px;
              overflow: hidden;
              position: relative;
              box-shadow: 0 4px 15px rgba(255, 107, 157, 0.1);
            }
            
            .progress-fill {
              height: 100%;
              background-color: #ff9cc5;
              transition: width 0.5s ease;
              display: flex;
              align-items: center;
              justify-content: center;
              font-weight: 700;
              font-size: clamp(0.85rem, 3.5vw, 1rem); /* FIXED: Smaller minimum size */
              color: white;
              padding: 0 10px; /* FIXED: Add padding so text doesn't touch edges */
              min-width: 60px; /* FIXED: Ensure progress bar is wide enough for text */
            }
            
            .question-card {
              background: white;
              border: 3px solid #ffc0d3;
              border-radius: 24px;
              padding: 40px;
              margin-bottom: 30px;
              box-shadow: 0 8px 25px rgba(255, 107, 157, 0.15);
              display: flex;
              flex-direction: column;
              align-items: center; /* FIXED: Center all content */
            }
            
            .unit-circle-svg {
              width: 100%;
              max-width: 300px;
              height: 300px;
              margin: 0 auto 30px;
              display: block;
              filter: drop-shadow(0 4px 15px rgba(255, 107, 157, 0.2));
            }
            
            .question-text {
              font-family: 'Lora', sans-serif;
              font-size: clamp(1.2rem, 4vw, 1.5rem);
              text-align: center;
              margin-bottom: 30px;
              color: #ff6b9d;
              font-weight: 700;
            }
            
            .input-group {
              margin-bottom: 20px;
              width: 100%; /* FIXED: Full width container */
              max-width: 400px; /* FIXED: Limit maximum width */
            }
            
            /* FIXED: Centered answer input */
            .answer-input {
              width: 100%;
              padding: 18px 24px;
              font-size: clamp(1rem, 3vw, 1.2rem);
              font-family: 'Lora', sans-serif;
              background: #fff5f7;
              border: 3px solid #ffc0d3;
              border-radius: 16px;
              color: #5a4a4f;
              text-align: center;
              transition: all 0.3s ease;
              font-weight: 600;
            }
            
            .answer-input:focus {
              outline: none;
              border-color: #ff6b9d;
              box-shadow: 0 0 0 4px rgba(255, 107, 157, 0.1);
              background: white;
            }
            
            .answer-input::placeholder {
              color: rgba(255, 107, 157, 0.4);
            }
            
            .button-group {
              display: flex;
              gap: 15px;
              flex-wrap: wrap;
              width: 100%; /* FIXED: Full width */
              justify-content: center; /* FIXED: Center buttons */
            }
            
            .btn {
              flex: 1;
              min-width: 140px;
              padding: 16px 32px;
              font-family: 'Lora', sans-serif;
              font-size: clamp(0.95rem, 2.5vw, 1.05rem);
              font-weight: 700;
              border: none;
              border-radius: 16px;
              cursor: pointer;
              transition: all 0.3s ease;
              position: relative;
              overflow: hidden;
            }
            
            .btn::before {
              content: '';
              position: absolute;
              top: 50%;
              left: 50%;
              width: 0;
              height: 0;
              border-radius: 50%;
              background: rgba(255, 255, 255, 0.3);
              transform: translate(-50%, -50%);
              transition: width 0.6s, height 0.6s;
            }
            
            .btn:hover::before {
              width: 300px;
              height: 300px;
            }
            
            .btn span {
              position: relative;
              z-index: 1;
            }
            
            .btn-primary {
              background: linear-gradient(135deg, #ff9cc5, #ff6b9d);
              color: white;
              box-shadow: 0 4px 15px rgba(255, 107, 157, 0.3);
            }
            
            .btn-primary:hover {
              box-shadow: 0 6px 20px rgba(255, 107, 157, 0.4);
              transform: translateY(-2px);
            }
            
            .btn-secondary {
              background: white;
              border: 3px solid #ffc0d3;
              color: #ff6b9d;
            }
            
            .btn-secondary:hover {
              background: #fff5f7;
              border-color: #ff6b9d;
              transform: translateY(-2px);
            }
            
            .btn:disabled {
              opacity: 0.5;
              cursor: not-allowed;
              transform: none !important;
            }
            
            .feedback {
              margin-top: 20px;
              margin-bottom: 20px; /* FIXED: Add bottom margin */
              padding: 20px;
              border-radius: 16px;
              text-align: center;
              font-size: clamp(1rem, 3vw, 1.1rem);
              animation: slideIn 0.3s ease;
              font-weight: 600;
              width: 100%; /* FIXED: Full width */
              max-width: 400px; /* FIXED: Match input width */
            }
            
            @keyframes slideIn {
              from { opacity: 0; transform: translateY(-10px); }
              to { opacity: 1; transform: translateY(0); }
            }
            
            .feedback-correct {
              background: #e8f9f0;
              border: 3px solid #7ed9a7;
              color: #2d8659;
            }
            
            .feedback-incorrect {
              background: #ffe8ec;
              border: 3px solid #ffb3c1;
              color: #d94a6e;
            }
            
            .correct-answer {
              margin-top: 10px;
              font-size: clamp(1.1rem, 3.5vw, 1.3rem);
              font-weight: 700;
              color: #ff6b9d;
            }
            
            .complete-screen {
              text-align: center;
              animation: fadeIn 0.5s ease;
            }
            
            .complete-title {
              font-family: 'Lora', sans-serif;
              font-size: clamp(2rem, 6vw, 3rem);
              font-weight: 700;
              color: #ff6b9d;
              margin-bottom: 20px;
            }
            
            .complete-stats {
              background: white;
              border: 3px solid #ffc0d3;
              border-radius: 24px;
              padding: 30px;
              margin: 30px 0;
              box-shadow: 0 8px 25px rgba(255, 107, 157, 0.15);
            }
            
            .stat-row {
              display: flex;
              justify-content: space-between;
              align-items: center;
              margin: 15px 0;
              font-size: clamp(1rem, 3vw, 1.2rem);
            }
            
            .stat-label {
              color: #b58a99;
              font-weight: 600;
            }
            
            .stat-value {
              font-family: 'Lora', sans-serif;
              font-weight: 700;
              color: #ff6b9d;
              font-size: clamp(1.2rem, 4vw, 1.5rem);
            }
            
            .hint-text {
              margin-top: 15px;
              color: rgba(255, 107, 157, 0.5);
              font-size: clamp(0.8rem, 2vw, 0.9rem);
              font-style: italic;
            }
            
            .review-badge {
              display: inline-block;
              background: #fff5f7;
              border: 3px solid #ffc0d3;
              color: #ff6b9d;
              padding: 10px 20px;
              border-radius: 20px;
              font-size: clamp(0.8rem, 2vw, 0.9rem);
              font-weight: 700;
              margin-bottom: 20px;
            }

            /* MOBILE OPTIMIZATIONS */
            @media (max-width: 600px) {
              .quiz-container {
                padding: 15px;
                padding-bottom: 60px; /* FIXED: More bottom padding on mobile for keyboard */
              }
              
              .question-card {
                padding: 25px 20px;
              }
              
              .button-group {
                flex-direction: column;
              }
              
              .btn {
                min-width: 100%;
              }
              
              /* FIXED: Smaller unit circle on mobile to leave room for input */
              .unit-circle-svg {
                max-width: 200px;
                height: 200px;
                margin-bottom: 20px;
              }
              
              /* FIXED: Reduce progress bar height on mobile */
              .progress-bar {
                height: 45px;
              }
              
              /* FIXED: Make sure input doesn't get too small */
              .answer-input {
                font-size: 1.1rem;
                padding: 16px 20px;
              }
            }

            /* EXTRA SMALL SCREENS */
            @media (max-width: 400px) {
              .progress-fill {
                font-size: 0.75rem; /* FIXED: Even smaller text for very small screens */
                padding: 0 8px;
              }
              
              .unit-circle-svg {
                max-width: 180px;
                height: 180px;
              }
            }
          `}</style>

          <div className="content">
            <div className="header">
              <h1 className="title">UNIT CIRCLE</h1>
              <p className="subtitle"></p>
            </div>
            <AnimatePresence mode="wait">
              {gameState === 'menu' && (
                <motion.div
                  key="menu"
                  initial={{ opacity: 0, y: 20 }}
                  animate={{ opacity: 1, y: 0 }}
                  exit={{ opacity: 0, y: -20 }}
                  className="mode-selection"
                >
                  {MODES.map((mode, index) => (
                    <motion.div
                      key={mode.id}
                      initial={{ opacity: 0, x: -50 }}
                      animate={{ opacity: 1, x: 0 }}
                      transition={{ delay: index * 0.1 }}
                      className="mode-card"
                      onClick={() => startGame(mode)}
                    >
                      <h2 className="mode-name">{mode.name}</h2>
                      <p className="mode-description">{mode.description}</p>
                    </motion.div>
                  ))}
                </motion.div>
              )}            

              {gameState === 'playing' && currentQuestion && (
                <motion.div
                  key="playing"
                  initial={{ opacity: 0 }}
                  animate={{ opacity: 1 }}
                  exit={{ opacity: 0 }}
                  className="game-view"
                >
                  {isReviewRound && (
                    <div className="review-badge">
                      ðŸ“š Review Round - Master Your Mistakes
                    </div>
                  )}

                  <div className="progress-bar">
                    <div 
                      className="progress-fill"
                      style={{ width: `${((currentQuestionIndex + 1) / questions.length) * 100}%` }}
                    >
                      {currentQuestionIndex + 1}/{questions.length}
                    </div>
                  </div>

                  <div className="question-card">
                    {drawUnitCircle(currentQuestion.degrees)}
                    
                    <div className="question-text">
                      {selectedMode.id === 'angle' && 'What is the angle?'}
                      {selectedMode.id === 'sine' && `What is sin(${currentQuestion.radians})?`}
                      {selectedMode.id === 'cosine' && `What is cos(${currentQuestion.radians})?`}
                    </div>

                    {!showFeedback && (
                      <>
                        <div className="input-group">
                          <input
                            type="text"
                            className="answer-input"
                            value={userAnswer}
                            onChange={(e) => {
                              let value = e.target.value;
                              // Auto-convert pi to Ï€ and sqrt to âˆš
                              value = value.replace(/pi/gi, 'Ï€').replace(/sqrt/gi, 'âˆš');
                              setUserAnswer(value);
                            }}
                            onKeyPress={(e) => e.key === 'Enter' && userAnswer && checkAnswer()}
                            placeholder={selectedMode.id === 'angle' ? '' : ''}
                            autoFocus
                          />
                        </div>
                      </>
                    )}

                    {showFeedback && (
                      <>
                        <div className={`feedback ${isCorrect ? 'feedback-correct' : 'feedback-incorrect'}`}>
                          {isCorrect ? 'âœ“ CORRECT!' : 'âœ— INCORRECT'}
                          {!isCorrect && (
                            <div className="correct-answer">
                              Correct answer: 
                              {selectedMode.id === 'angle' && ` ${currentQuestion.radians} (${currentQuestion.degrees}Â°)`}
                              {selectedMode.id === 'sine' && ` ${currentQuestion.sine}`}
                              {selectedMode.id === 'cosine' && ` ${currentQuestion.cosine}`}
                            </div>
                          )}
                        </div>
                        <input
                          type="text"
                          style={{ position: 'absolute', opacity: 0, pointerEvents: 'none' }}
                          autoFocus
                          onKeyPress={(e) => e.key === 'Enter' && nextQuestion()}
                        />
                      </>
                    )}

                    <div className="button-group">
                      {!showFeedback ? (
                        <button 
                          className="btn btn-primary" 
                          onClick={checkAnswer}
                          disabled={!userAnswer.trim()}
                        >
                          <span>Submit Answer</span>
                        </button>
                      ) : (
                        <button 
                          className="btn btn-primary" 
                          onClick={nextQuestion}
                        >
                          <span>Next Question</span>
                        </button>
                      )}
                      <button 
                        className="btn btn-secondary" 
                        onClick={() => setGameState('menu')}
                      >
                        <span>Exit to Menu</span>
                      </button>
                    </div>
                  </div>
                </motion.div>
              )}

              {gameState === 'complete' && (
                <motion.div
                  key="complete"
                  initial={{ opacity: 0, scale: 0.8 }}
                  animate={{ opacity: 1, scale: 1 }}
                  exit={{ opacity: 0 }}
                  className="complete-screen"
                >
                  <h2 className="complete-title">ðŸŽ‰ MASTERED! ðŸŽ‰</h2>
                  
                  <div className="complete-stats">
                    <div className="stat-row">
                      <span className="stat-label">Mode:</span>
                      <span className="stat-value">{selectedMode.name}</span>
                    </div>
                    <div className="stat-row">
                      <span className="stat-label">Total Questions:</span>
                      <span className="stat-value">{score.total}</span>
                    </div>
                    <div className="stat-row">
                      <span className="stat-label">Correct:</span>
                      <span className="stat-value">{score.correct}</span>
                    </div>
                    <div className="stat-row">
                      <span className="stat-label">Accuracy:</span>
                      <span className="stat-value">
                        {score.total > 0 ? Math.round((score.correct / score.total) * 100) : 0}%
                      </span>
                    </div>
                  </div>

                  <div className="button-group">
                    <button 
                      className="btn btn-primary" 
                      onClick={() => startGame(selectedMode)}
                    >
                      <span>Play Again</span>
                    </button>
                    <button 
                      className="btn btn-secondary" 
                      onClick={() => setGameState('menu')}
                    >
                      <span>Main Menu</span>
                    </button>
                  </div>
                </motion.div>
              )}
            </AnimatePresence>
          </div>
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<UnitCircleQuiz />);
  </script>
  
  <!-- PWA Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/service-worker.js')
        .then(reg => console.log('Service Worker registered'))
        .catch(err => console.log('Service Worker registration failed'));
    }
  </script>
</body>
</html>
